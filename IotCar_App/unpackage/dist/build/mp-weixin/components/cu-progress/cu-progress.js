"use strict";var t=require("../../common/vendor.js");const e={data:()=>({scale:1,percent:0,showValue:0,showVL:0,handleMoveStatus:!1,handleX:0,handleY:0,progressBarInfo:{left:0,bottom:0,width:0,height:0},area:{left:0,bottom:0,width:0,height:0,top:0},handle:{height:0}}),beforeMount:function(){const e=t.index.getSystemInfoSync();if(this.scale=750/e.windowWidth,this.maxValue-this.minValue==0)return void console.error("min不能等于max:"+this.minValue+"->"+this.maxValue);this.showValue=this.valueFormat(this.value),this.percent=Math.abs(this.showValue-this.minValue)/Math.abs(this.maxValue-this.minValue)*100;let i=this.textLength(this.minValue+this.infoEndText),h=this.textLength(this.maxValue+this.infoEndText);this.showVL=h>i?h:i},mounted:function(){this.$nextTick((function(){const e=t.index.createSelectorQuery().in(this);e.select(".cu-progress-bar").boundingClientRect((t=>{this.progressBarInfo.width=t.width,this.progressBarInfo.left=t.left,this.progressBarInfo.bottom=t.bottom,this.progressBarInfo.height=t.height,"vertical"==this.direction?this.handleY=this.progressBarInfo.height*(100-this.percent)/100:this.handleX=this.progressBarInfo.width*this.percent/100})).exec(),e.select(".cu-area").boundingClientRect((t=>{this.area.width=t.width,this.area.left=t.left,this.area.height=t.height,this.area.bottom=t.bottom,this.area.top=t.top})).exec(),e.select(".cu-handle").boundingClientRect((t=>{this.handle.height=t.height})).exec()}))},props:{infoAlign:{default:"right",type:String},step:{default:1,type:[String,Number]},direction:{default:"horizontal",type:String},disabled:{default:!1,type:[String,Boolean]},bgBorderRadius:{default:0,type:[Number,String]},iconBorderRadius:{default:"8px",type:[Number,String]},iconColor:{default:"inherit",type:String},iconSize:{default:"8px",type:[Number,String]},handleIcon:{default:"",type:String},backgroundColor:{default:"inherit",type:String},max:{default:100,type:[String,Number]},min:{default:0,type:[String,Number]},value:{default:null,type:[String,Number]},activeColor:{default:"#444444",type:String},noActiveColor:{default:"#888888",type:String},strokeWidth:{default:"3",type:[String,Number]},damping:{default:100,type:[String,Number]},handleColor:{default:"#000000",type:String},handleSize:{default:"8px",type:[String,Number]},handleBorderRadius:{default:"8px",type:[String,Number]},showInfo:{default:!1,type:[Boolean,String]},infoSize:{default:"16px",type:[String,Number]},infoColor:{default:"#000000",type:String},infoEndText:{default:"",type:String},borderRadius:{default:0,type:[String,Number]},width:{default:"200px",type:[String,Number]}},computed:{getShowInfoStatus2view(){return(1==this.showInfo||"true"==this.showInfo)&&"vertical"!=this.direction},showVLC(){let t=this.textLength(this.minValue.toFixed(0)+this.infoEndText),e=this.textLength(this.maxValue.toFixed(0)+this.infoEndText);return e>t?e:t},flexDirection(){return"vertical"==this.direction?"column":"row"},pgBarBottom(){return"vertical"==this.direction?"0px":"unset"},showInfoStatus(){return!(!this.getShowInfoStatus()||"vertical"==this.direction)},pgBarBg(){let t;return"vertical"==this.direction?t="linear-gradient(to top,"+this.activeColor+" "+this.percent+"%,"+this.noActiveColor+" "+this.percent+"%)":(t="linear-gradient(to right,"+this.activeColor+" "+this.percent+"%,"+this.noActiveColor+" "+this.percent+"%)",this.activeColor,this.percent,this.noActiveColor,this.percent,this.activeColor,this.percent,this.noActiveColor,this.percent,this.activeColor,this.percent,this.noActiveColor,this.percent),t},pgBarBR(){return this.sizeDeal(this.borderRadius)[2]},bgBR(){return this.sizeDeal(this.bgBorderRadius)[2]},iconBR(){return this.sizeDeal(this.iconBorderRadius)[2]},iconS(){return this.sizeDeal(this.iconSize)[2]},infoW(){const t=this.sizeDeal(this.infoSize);return t[0]*this.showVL+t[1]},infoS(){return this.sizeDeal(this.infoSize)[2]},infoRt(){return"left"==this.infoAlign&&"vertical"!=this.direction?"unset":0},infoLt(){if("left"==this.infoAlign&&"vertical"!=this.direction)return 0;if("center"==this.infoAlign&&"vertical"!=this.direction){return this.area.width/2-this.sizeDeal(this.infoSize)[0]*this.showVL/2+"px"}return"unset"},areaW:{get(){if("vertical"==this.direction)return this.maxHeight(!0)[2];{const t=this.sizeDeal(this.infoSize);let e;return this.maxHeight(),e=this.getShowInfoStatus()?"calc("+this.width+" - "+t[0]*this.showVL+t[1]+")":this.width,e}},set:t=>t},areaH:{get(){return"vertical"==this.direction?this.width:this.maxHeight()[2]},set:t=>t},areaLeft(){if("left"==this.infoAlign&&"vertical"!=this.direction){const t=this.sizeDeal(this.infoSize);return t[0]*this.showVL+t[1]}return 0},pgBarW(){if("vertical"==this.direction)return this.sizeDeal(this.strokeWidth)[2];{const t=this.sizeDeal(this.infoSize),e=this.sizeDeal(this.width),i=this.sizeDeal(this.handleSize);let h;return h=this.getShowInfoStatus()?"calc("+e[2]+" - "+t[0]*this.showVL+t[1]+" - "+i[2]+")":"calc("+e[2]+" - "+i[2]+")",h}},pgBarH(){if("vertical"==this.direction){const t=this.sizeDeal(this.width),e=this.sizeDeal(this.handleSize);return"calc("+t[2]+" - "+e[2]+")"}return this.sizeDeal(this.strokeWidth)[2]},pgBarML(){if("vertical"==this.direction){const t=this.sizeDeal(this.progressBarInfo.width);return Number(this.area.width)/2-t[0]/2+"px"}{const t=this.sizeDeal(this.handleSize);return t[0]/2+t[1]}},pgBarMB(){if("vertical"==this.direction){const t=this.sizeDeal(this.handleSize);return t[0]/2+t[1]}return 0},handleS(){return this.sizeDeal(this.handleSize)[2]},handleL(){if("vertical"==this.direction){const t=this.sizeDeal(this.handleSize);return Number(this.area.width)/2-t[0]/2+"px"}return"unset"},handleT(){if(this.area.height&&"vertical"!=this.direction){const t=this.sizeDeal(this.handleSize);return Number(this.area.height)/2-t[0]/2+"px"}return"unset"},handleBR(){return this.sizeDeal(this.handleBorderRadius)[2]},progressMainW(){let t;return t="vertical"==this.direction?this.maxHeight(!0)[2]:this.width,t},progressMainH(){let t;return t="vertical"==this.direction?this.width:this.maxHeight()[2],t},maxValue(){let t=Number.isNaN(parseFloat(this.max))?100:parseFloat(this.max);return this.valueFormat(t)},minValue(){let t=Number.isNaN(parseFloat(this.min))?0:parseFloat(this.min),e=this.getStepInfo();return Number(t.toFixed(e[1]))}},watch:{showVLC(t){if(this.showVL=t,"vertical"!=this.direction){const t=this.sizeDeal(this.infoSize),e=this.maxHeight();let i;i=this.getShowInfoStatus()?"calc("+this.width+" - "+t[0]*this.showVL+t[1]+")":this.width,this.areaW=i,this.areaH=e[2]}this.clientInit()},value(t){this.handleMoveStatus||(this.showValue=this.valueFormat(t),this.percent=(this.showValue-this.minValue)/Math.abs(this.maxValue-this.minValue)*100,"vertical"==this.direction?this.handleY=this.progressBarInfo.height*this.percent/100:this.handleX=this.progressBarInfo.width*this.percent/100)}},methods:{valueFormat(t){t=Number(t-this.minValue).toFixed(7);let e=this.getStepInfo(),i=t*10**e[1],h=i%(e[0]*10**e[1]),s=Math.floor(h),r=(Math.floor(i)-s)/10**e[1];return Number((r+this.minValue).toFixed(6))},getStepInfo(){let t=Number(this.step);if(t<=0||!t)return[1,0];{let e=t.toString().split(".");return 1==e.length?[t,0]:[t,e[1].length]}},clientInit(){this.$nextTick((function(){const e=t.index.createSelectorQuery().in(this);if(e.select(".cu-progress-bar").boundingClientRect((t=>{this.progressBarInfo.width=t.width,this.progressBarInfo.left=t.left,this.progressBarInfo.bottom=t.bottom,this.progressBarInfo.height=t.height,"vertical"==this.direction?this.handleY=this.progressBarInfo.height*this.percent/100:this.handleX=this.progressBarInfo.width*this.percent/100})).exec(),e.select(".cu-area").boundingClientRect((t=>{this.area.width=t.width,this.area.left=t.left,this.area.height=t.height,this.area.bottom=t.bottom,this.area.top=t.top})).exec(),this.maxValue-this.minValue==0)console.error("min不能等于max:"+this.minValue+"->"+this.maxValue);else{let t=this.getStepInfo(),e=this.percent*(this.maxValue-this.minValue)/100*10**t[1],i=e%(t[0]*10**t[1]),h=Math.floor(i),s=(Math.floor(e)-h)/10**t[1];this.showValue=s}}))},getShowInfoStatus(){return(1==this.showInfo||"true"==this.showInfo)&&"vertical"!=this.direction&&"center"!==this.infoAlign},textLength(t){let e=(t=t.toString()).split(".")[0],i=t.match(/[^\x00-\xff]/g),h=0;i&&(h=i.length);let s=(e.length-h+this.getStepInfo()[1])/3*2+h+.2;return Number(s.toFixed(2))},maxHeight(t){let e=[];if(!t){this.infoEndText.match(/[^\x00-\xff]/g)?e.push(1.1*this.sizeDeal(this.infoSize)[0]):e.push(this.sizeDeal(this.infoSize)[0])}return e.push(this.sizeDeal(this.strokeWidth)[0]),e.push(this.sizeDeal(this.handleSize)[0]),e.sort((function(t,e){return e-t})),[e[0],"px",e[0]+"px"]},sizeDeal(t){let e=Number.isNaN(parseFloat(t))?0:parseFloat(t),i=t.toString().replace(/[0-9]/g,"");return"rpx"==i?(e/=this.scale,i="px"):""==i?i="px":"vw"==i&&(i="px",e=e/100*750/this.scale),[e,i,e+i]},change(){this.$emit("change",{type:"change",value:this.showValue})},handleMove(t){let e=t;e=e>=0?e:0;let i,h=this.sizeDeal(this.handleSize);if("vertical"==this.direction){e=e-this.area.top-h[0]/2,i=e/(this.area.height-h[0]-1),i=i<=1?i:1,i=i>0?i:0;let t=Number((1-i)*(this.maxValue-this.minValue))+this.minValue;this.percent=100*(1-i),this.showValue=this.valueFormat(t),this.handleY=e}else{i=e/(this.area.width-h[0]-1),i=i<=1?i:1,i=i>0?i:0;let t=Number(i*(this.maxValue-this.minValue))+this.minValue;this.percent=100*i,this.showValue=this.valueFormat(t),this.handleX=e}this.$emit("dragging",{type:"dragging",value:this.showValue})},touchEnd(){this.disabled||(this.handleMoveStatus=!1,this.$emit("dragged",{type:"dragged",value:this.showValue}))},areaTouchStart(t){if(!this.disabled){this.handleMoveStatus=!0;let e,i=this.sizeDeal(this.handleSize);e="vertical"==this.direction?t.changedTouches[0].pageY:t.changedTouches[0].pageX-this.area.left-i[0]/2,e=e>=0?e:0,this.handleMove(e),this.$emit("dragstart",{type:"dragstart",value:this.showValue})}},areaTouchMove(t){if(!this.disabled){let e,i=this.sizeDeal(this.handleSize);e="vertical"==this.direction?t.changedTouches[0].pageY:t.changedTouches[0].pageX-this.area.left-i[0]/2,e=e>=0?e:0,this.handleMove(e)}},touchCancel(){this.disabled||(this.touchEnd(),this.$emit("dragcancel",{type:"dragcancel",value:this.showValue}))}}};var i=t._export_sfc(e,[["render",function(e,i,h,s,r,a){return t.e({a:a.pgBarBottom,b:a.pgBarBg,c:a.pgBarML,d:a.pgBarMB,e:a.pgBarW,f:a.pgBarH,g:a.pgBarBR,h:h.noActiveColor,i:t.n(h.handleIcon),j:h.iconColor,k:a.iconS,l:a.iconBR,m:a.handleT,n:a.handleS,o:a.handleS,p:a.handleBR,q:h.handleColor,r:t.o(((...t)=>a.change&&a.change(...t))),s:h.damping,t:r.handleX,v:r.handleY,w:"vertical"==h.direction?"vertical":"horizontal",x:a.flexDirection,y:a.areaW,z:a.areaH,A:t.o(((...t)=>a.touchCancel&&a.touchCancel(...t))),B:t.o(((...t)=>a.areaTouchStart&&a.areaTouchStart(...t))),C:t.o(((...t)=>a.areaTouchMove&&a.areaTouchMove(...t))),D:t.o(((...t)=>a.touchEnd&&a.touchEnd(...t))),E:a.areaLeft,F:a.flexDirection,G:a.areaW,H:a.areaH,I:a.getShowInfoStatus2view},a.getShowInfoStatus2view?{J:t.t(r.showValue),K:t.t(h.infoEndText),L:a.infoRt,M:a.infoLt,N:h.infoColor,O:a.infoS,P:a.infoW}:{},{Q:a.bgBR,R:a.progressMainW,S:a.progressMainH,T:h.backgroundColor})}],["__scopeId","data-v-741c8b2c"]]);wx.createComponent(i);
